<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç›¸ç¶šç¨è¨ˆç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆè©³ã—ã„è§£èª¬ä»˜ãï¼‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
            background-color: #f7fafc;
        }
        h2 {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #4A5568;
            border-bottom: 2px solid #6366F1;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #2d3748;
        }
        .section-box {
            background-color: white;
            padding: 1.5rem 2rem;
            border-radius: 0.75rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .input-label {
            display: flex;
            align-items: center;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        .input-field {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #D1D5DB;
            font-size: 1rem;
        }
        .input-field:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: #6366F1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
        }
        .unit {
            margin-left: 0.5rem;
            color: #4B5563;
            font-weight: 500;
        }
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 280px;
            background-color: #2d3748;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -140px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
            font-weight: normal;
            line-height: 1.5;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .calc-step {
            padding: 1rem;
            border-left: 4px solid #818cf8;
            background-color: #f3f4f6;
            margin-bottom: 1rem;
            border-radius: 0 0.5rem 0.5rem 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem;
            text-align: center;
        }
        th {
            background-color: #edf2f7;
            font-weight: bold;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">ç›¸ç¶šç¨è¨ˆç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
            <p class="mt-2 text-lg text-gray-600">è©³ã—ã„è§£èª¬ä»˜ãã§åˆå¿ƒè€…ã§ã‚‚å®‰å¿ƒ</p>
        </header>

        <div class="p-4 mb-8 text-sm text-red-700 bg-red-100 rounded-lg" role="alert">
          <span class="font-bold">ã€å…è²¬äº‹é …ã€‘</span>ã“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ä¸€èˆ¬çš„ãªã‚±ãƒ¼ã‚¹ã‚’æƒ³å®šã—ãŸæ¦‚ç®—ã§ã™ã€‚å®Ÿéš›ã®ç¨é¡ã¨ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã€ç¨æ³•æ”¹æ­£ç­‰ã«ã‚ˆã‚Šå†…å®¹ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ­£ç¢ºãªç”³å‘Šãƒ»ç´ç¨ã«ã¯ã€å¿…ãšç¨ç†å£«ã«ã”ç›¸è«‡ãã ã•ã„ã€‚
        </div>

        <main id="calculator">
            <!-- å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <section class="section-box">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    1. ç›¸ç¶šäººã¨è²¡ç”£ã«ã¤ã„ã¦å…¥åŠ›
                </h2>

                <h3 class="mb-4 text-lg">A. æ³•å®šç›¸ç¶šäºº</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 p-4 bg-gray-50 rounded-lg mb-6">
                    <div>
                        <label for="heirPattern" class="input-label">ç›¸ç¶šäººã®æ§‹æˆã¯ï¼Ÿ</label>
                        <select id="heirPattern" class="input-field">
                            <option value="spouseAndChildren" selected>é…å¶è€…ã¨å­</option>
                            <option value="spouseAndParents">é…å¶è€…ã¨è¦ª</option>
                            <option value="spouseAndSiblings">é…å¶è€…ã¨å…„å¼Ÿå§‰å¦¹</option>
                            <option value="childrenOnly">å­ã®ã¿</option>
                            <option value="parentsOnly">è¦ªã®ã¿</option>
                            <option value="siblingsOnly">å…„å¼Ÿå§‰å¦¹ã®ã¿</option>
                            <option value="spouseOnly">é…å¶è€…ã®ã¿</option>
                        </select>
                    </div>
                    <div id="heirCountContainer">
                        <label for="numHeirs" class="input-label" id="heirCountLabel">å­ã®äººæ•°</label>
                        <div class="flex items-center">
                           <input type="number" id="numHeirs" class="input-field" value="2" min="1">
                           <span class="unit">äºº</span>
                        </div>
                    </div>
                </div>

                <h3 class="mb-4 text-lg">B. ãƒ—ãƒ©ã‚¹ã®è²¡ç”£ï¼ˆè³‡ç”£ï¼‰</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                    <!-- è³‡ç”£é …ç›® -->
                    <div>
                        <label for="assetCash" class="input-label">é è²¯é‡‘ãƒ»ç¾é‡‘</label>
                        <div class="flex items-center"><input type="number" id="assetCash" class="input-field" placeholder="ä¾‹: 3000" min="0"><span class="unit">ä¸‡å††</span></div>
                    </div>
                    <div>
                        <label for="assetSecurities" class="input-label">æœ‰ä¾¡è¨¼åˆ¸ (æ ªãªã©)</label>
                        <div class="flex items-center"><input type="number" id="assetSecurities" class="input-field" placeholder="ä¾‹: 1000" min="0"><span class="unit">ä¸‡å††</span></div>
                    </div>
                    <div>
                        <label for="assetRealEstate" class="input-label">ä¸å‹•ç”£ (åœŸåœ°ãƒ»å»ºç‰©)
                            <div class="tooltip">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="text-gray-400"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.134-.422zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/></svg>
                                <span class="tooltip-text">ã”è‡ªå®…ãªã©ã¯ã€å®Ÿéš›ã®å£²è²·ä¾¡æ ¼ã§ã¯ãªãã€Œç›¸ç¶šç¨è©•ä¾¡é¡ï¼ˆè·¯ç·šä¾¡ã‚„å›ºå®šè³‡ç”£ç¨è©•ä¾¡é¡ï¼‰ã€ã‚’åŸºã«è¨ˆç®—ã—ã¾ã™ã€‚ä¸æ˜ãªå ´åˆã¯å›ºå®šè³‡ç”£ç¨ã®èª²ç¨æ˜ç´°æ›¸ãªã©ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</span>
                            </div>
                        </label>
                        <div class="flex items-center"><input type="number" id="assetRealEstate" class="input-field" placeholder="ä¾‹: 4000" min="0"><span class="unit">ä¸‡å††</span></div>
                    </div>
                     <div class="flex items-end pb-2">
                         <div class="flex items-center space-x-2">
                             <input type="checkbox" id="smallScaleLand" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600">
                             <label for="smallScaleLand" class="text-sm text-gray-700">å°è¦æ¨¡å®…åœ°ç­‰ã®ç‰¹ä¾‹ã‚’é©ç”¨</label>
                        </div>
                    </div>
                    <div>
                        <label for="assetLifeInsurance" class="input-label">ç”Ÿå‘½ä¿é™ºé‡‘</label>
                        <div class="flex items-center"><input type="number" id="assetLifeInsurance" class="input-field" placeholder="ä¾‹: 1500" min="0"><span class="unit">ä¸‡å††</span></div>
                    </div>
                    <div>
                        <label for="assetOther" class="input-label">ãã®ä»–ã®è²¡ç”£</label>
                        <div class="flex items-center"><input type="number" id="assetOther" class="input-field" placeholder="ä¾‹: 500" min="0"><span class="unit">ä¸‡å††</span></div>
                    </div>
                </div>

                <h3 class="my-4 text-lg">C. ãƒã‚¤ãƒŠã‚¹ã®è²¡ç”£ãƒ»è²»ç”¨</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                    <div>
                        <label for="liabilityDebt" class="input-label">å€Ÿå…¥é‡‘ãƒ»æœªæ‰•é‡‘</label>
                        <div class="flex items-center"><input type="number" id="liabilityDebt" class="input-field" placeholder="ä¾‹: 500" min="0"><span class="unit">ä¸‡å††</span></div>
                    </div>
                    <div>
                        <label for="liabilityFuneral" class="input-label">è‘¬å¼è²»ç”¨</label>
                        <div class="flex items-center"><input type="number" id="liabilityFuneral" class="input-field" placeholder="ä¾‹: 200" min="0"><span class="unit">ä¸‡å††</span></div>
                    </div>
                </div>
            </section>

            <!-- è¨ˆç®—ãƒœã‚¿ãƒ³ -->
            <div class="text-center my-10">
                <button id="calculateBtn" class="bg-indigo-600 text-white font-bold py-4 px-16 rounded-lg hover:bg-indigo-700 transition-colors text-2xl shadow-lg transform hover:scale-105">
                    â–¼ è¨ˆç®—ã—ã¦ã¿ã‚‹ â–¼
                </button>
            </div>
        </main>

        <!-- çµæœè¡¨ç¤ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section id="resultsSection" class="hidden">
            <div class="section-box">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500"><path d="M15.5 2H8.6c-.4 0-.8.2-1.1.5-.3.3-.5.7-.5 1.1V21c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h7.8c.4 0 .8-.2 1.1-.5.3-.3.5-.7.5-1.1V7.5L15.5 2z"></path><path d="M15 2v5h5"></path><path d="M10 16s.8-1 2-1 2 1 2 1"></path><path d="M10 12s.8-1 2-1 2 1 2 1"></path></svg>
                    2. è¨ˆç®—çµæœã®æ¦‚è¦
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-center">
                    <div class="bg-gray-100 p-6 rounded-lg">
                        <p class="text-lg text-gray-600">ã‚ãªãŸã®ç›¸ç¶šç¨ã¯...</p>
                        <p id="resultTotalTax" class="text-4xl lg:text-5xl font-bold text-indigo-700 my-2">0 å††</p>
                        <p id="taxMessage" class="font-semibold"></p>
                    </div>
                    <div class="bg-gray-100 p-6 rounded-lg">
                        <p class="text-lg text-gray-600">ç¨é‡‘ã®ã‹ã‹ã‚‹è²¡ç”£ (èª²ç¨éºç”£ç·é¡)</p>
                        <p id="resultTaxableEstate" class="text-4xl lg:text-5xl font-bold text-gray-800 my-2">0 å††</p>
                        <p class="text-sm text-gray-500">ï¼ˆè²¡ç”£åˆè¨ˆã‹ã‚‰åŸºç¤æ§é™¤ãªã©ã‚’å¼•ã„ãŸé¡ï¼‰</p>
                    </div>
                </div>

                <h3 class="mt-8 mb-4">å„ç›¸ç¶šäººã®ç´ç¨é¡ã®ç›®å®‰</h3>
                <div id="heirResults" class="space-y-3"></div>
                <p class="mt-4 text-xs text-gray-500">â€»ä¸Šè¨˜ã¯ã€æ³•å¾‹ã§å®šã‚ã‚‰ã‚ŒãŸå‰²åˆï¼ˆæ³•å®šç›¸ç¶šåˆ†ï¼‰ã§è²¡ç”£ã‚’å–å¾—ã—ãŸå ´åˆã®ç›®å®‰ã§ã™ã€‚å®Ÿéš›ã®åˆ†ã‘æ–¹ã«ã‚ˆã£ã¦å„äººã®ç¨é¡ã¯å¤‰ã‚ã‚Šã¾ã™ï¼ˆç›¸ç¶šç¨ã®ç·é¡ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚</p>
            </div>

            <!-- è¨ˆç®—éç¨‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="section-box">
                 <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500"><g fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"><g transform="translate(-436 -2036)"><g transform="translate(436 2036)"><path d="M19,3 L5,3 C3.89,3 3,3.9 3,5 L3,19 C3,20.1 3.89,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 Z M19,19 L5,19 L5,5 L19,5 L19,19 Z"></path><path d="M11.41,16.59 L12.83,18 L16.83,14 L12.83,10 L11.41,11.41 L13.41,13.41 L8,13.41 L8,14.59 L13.41,14.59 L11.41,16.59 Z"></path></g></g></g></svg>
                    3. è¨ˆç®—ã®ãªãŒã‚Œï¼ˆè©³ã—ã„è§£èª¬ï¼‰
                </h2>
                <div id="calculationProcess" class="space-y-4 text-base"></div>
            </div>
        </section>

        <!-- è§£èª¬ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section id="knowledgeSection" class="space-y-8 mt-12">
            <div class="section-box">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                    4. ã“ã‚Œã ã‘ã¯çŸ¥ã£ã¦ãŠããŸã„ï¼ç›¸ç¶šã®åŸºæœ¬çŸ¥è­˜
                </h2>
                <div>
                    <h3 class="mb-3">èª°ãŒç›¸ç¶šäººã«ãªã‚‹ã®ï¼Ÿ (æ³•å®šç›¸ç¶šäºº)</h3>
                    <div class="p-4 bg-gray-50 rounded-lg text-center">
                        <p class="font-bold">é…å¶è€…(å¤«ãƒ»å¦»)ã¯ã€å¸¸ã«ç›¸ç¶šäººã«ãªã‚Šã¾ã™ã€‚</p>
                        <p class="font-bold text-2xl my-2">ï¼‹</p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-left">
                            <div class="p-3 border-2 border-indigo-500 rounded-lg bg-white shadow-md">
                                <p class="font-bold text-indigo-700">ã€ç¬¬1é †ä½ã€‘å­</p>
                                <p class="text-sm">å­ãŒã™ã§ã«äº¡ããªã£ã¦ã„ã‚‹å ´åˆã¯ã€å­«ãŒä»£ã‚ã‚Šã«ç›¸ç¶šã—ã¾ã™ï¼ˆä»£è¥²ç›¸ç¶šï¼‰ã€‚</p>
                            </div>
                            <div class="p-3 border rounded-lg bg-white">
                                <p class="font-bold">ã€ç¬¬2é †ä½ã€‘è¦ª</p>
                                <p class="text-sm">ç¬¬1é †ä½ã®äººãŒã„ãªã„å ´åˆã«ç›¸ç¶šäººã«ãªã‚Šã¾ã™ã€‚è¦ªãŒäº¡ããªã£ã¦ã„ã‚‹å ´åˆã¯ç¥–çˆ¶æ¯ãŒç›¸ç¶šã—ã¾ã™ã€‚</p>
                            </div>
                            <div class="p-3 border rounded-lg bg-white">
                                <p class="font-bold">ã€ç¬¬3é †ä½ã€‘å…„å¼Ÿå§‰å¦¹</p>
                                <p class="text-sm">ç¬¬1ãƒ»ç¬¬2é †ä½ã®äººãŒã„ãªã„å ´åˆã«ç›¸ç¶šäººã«ãªã‚Šã¾ã™ã€‚å…„å¼Ÿå§‰å¦¹ãŒäº¡ããªã£ã¦ã„ã‚‹å ´åˆã¯ç”¥ãƒ»å§ªãŒç›¸ç¶šã—ã¾ã™ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-8">
                    <h3 class="mb-3">ç›¸ç¶šç¨ã®ç¨ç‡ã¨æ§é™¤é¡ï¼ˆé€Ÿç®—è¡¨ï¼‰</h3>
                    <p class="mb-4">ç›¸ç¶šç¨ã¯ã€å–å¾—ã™ã‚‹é‡‘é¡ãŒå¤§ãããªã‚‹ã»ã©ç¨ç‡ãŒé«˜ããªã‚‹ã€Œè¶…éç´¯é€²ç¨ç‡ã€ãŒæ¡ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®è¡¨ã‚’ä½¿ã£ã¦è¨ˆç®—ã—ã¾ã™ã€‚</p>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr>
                                    <th>æ³•å®šç›¸ç¶šåˆ†ã«å¿œãšã‚‹å–å¾—é‡‘é¡</th>
                                    <th>ç¨ç‡</th>
                                    <th>æ§é™¤é¡</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>1,000ä¸‡å††ä»¥ä¸‹</td><td>10%</td><td>-</td></tr>
                                <tr><td>3,000ä¸‡å††ä»¥ä¸‹</td><td>15%</td><td>50ä¸‡å††</td></tr>
                                <tr><td>5,000ä¸‡å††ä»¥ä¸‹</td><td>20%</td><td>200ä¸‡å††</td></tr>
                                <tr><td>1å„„å††ä»¥ä¸‹</td><td>30%</td><td>700ä¸‡å††</td></tr>
                                <tr><td>2å„„å††ä»¥ä¸‹</td><td>40%</td><td>1,700ä¸‡å††</td></tr>
                                <tr><td>3å„„å††ä»¥ä¸‹</td><td>45%</td><td>2,700ä¸‡å††</td></tr>
                                <tr><td>6å„„å††ä»¥ä¸‹</td><td>50%</td><td>4,200ä¸‡å††</td></tr>
                                <tr><td>6å„„å††è¶…</td><td>55%</td><td>7,200ä¸‡å††</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="section-box">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></svg>
                    5. ã©ã†ã™ã‚Œã°ç¯€ç¨ã§ãã‚‹ï¼Ÿ ç›¸ç¶šç¨å¯¾ç­–ã‚¬ã‚¤ãƒ‰
                </h2>
                <div class="space-y-6">
                    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                        <h3 class="font-bold text-lg text-indigo-700">â‘  ç”Ÿå‘½ä¿é™ºã®éèª²ç¨æ ã‚’ãƒ•ãƒ«æ´»ç”¨ã™ã‚‹</h3>
                        <p class="text-gray-700 mt-1">æ­»äº¡ä¿é™ºé‡‘ã«ã¯ã€Œ500ä¸‡å†† Ã— æ³•å®šç›¸ç¶šäººã®æ•°ã€ã®éèª²ç¨æ ãŒã‚ã‚Šã¾ã™ã€‚é é‡‘ã‚’ä¿é™ºã«å¤‰ãˆã‚‹ã ã‘ã§è²¡ç”£ã‚’åœ§ç¸®ã§ãã€ç´ç¨è³‡é‡‘ã®æº–å‚™ã«ã‚‚å½¹ç«‹ã¡ã¾ã™ã€‚</p>
                        <div class="mt-3 p-3 bg-white border-l-4 border-yellow-400">
                           <p class="font-bold">ğŸ¤”ã€Œç›¸ç¶šé¡ãŒå¤§ãã„ã¨ã€å°‘ã—ã®æ§é™¤ã¯æ„å‘³ãŒãªã„ã€ã¯æœ¬å½“ï¼Ÿ</p>
                           <p class="text-sm mt-1">ã„ã„ãˆã€<b>å¤§ããªé–“é•ã„</b>ã§ã™ã€‚ç›¸ç¶šç¨ã¯ã€è²¡ç”£ã®æœ€ã‚‚é«˜ã„ä¾¡æ ¼å¸¯ã®éƒ¨åˆ†ã«ã€æœ€ã‚‚é«˜ã„ç¨ç‡ãŒã‹ã‹ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ç¨ç‡40%ã®å¯¾è±¡ã¨ãªã‚‹è²¡ç”£ãŒã‚ã‚‹å ´åˆã€1,000ä¸‡å††ã®ç”Ÿå‘½ä¿é™ºé‡‘æ§é™¤ã‚’ä½¿ã†ã¨ã€ç´ç¨é¡ãŒ <b>1,000ä¸‡å†† Ã— 40% = 400ä¸‡å††</b> ã‚‚å°‘ãªããªã‚Šã¾ã™ã€‚æ§é™¤ã¯ã€<b>ç´ç¨é¡ãã®ã‚‚ã®ã‚’ç›´æ¥æ¸›ã‚‰ã™</b>éå¸¸ã«å¼·åŠ›ãªåŠ¹æœãŒã‚ã‚Šã¾ã™ã€‚</p>
                        </div>
                    </div>
                    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                        <h3 class="font-bold text-lg text-indigo-700">â‘¡ã€Œå°è¦æ¨¡å®…åœ°ç­‰ã®ç‰¹ä¾‹ã€ã§ä¸å‹•ç”£è©•ä¾¡é¡ã‚’å¤§å¹…ã«ä¸‹ã’ã‚‹</h3>
                        <p class="text-gray-700 mt-1">äº¡ããªã£ãŸæ–¹ã®è‡ªå®…ã‚„äº‹æ¥­ç”¨ã®åœŸåœ°ã‚’ã€é…å¶è€…ã‚„åŒå±…ã®è¦ªæ—ãªã©ãŒç›¸ç¶šã™ã‚‹å ´åˆã€åœŸåœ°ã®è©•ä¾¡é¡ã‚’<b>æœ€å¤§80%</b>ã‚‚æ¸›é¡ã§ãã‚‹ã€éå¸¸ã«å¼·åŠ›ãªåˆ¶åº¦ã§ã™ã€‚</p>
                        <div class="mt-3 p-3 bg-white border-l-4 border-green-400">
                           <p class="font-bold">ğŸ’¡ å…·ä½“çš„ãªåŠ¹æœã¯ï¼Ÿ</p>
                           <p class="text-sm mt-1">ä¾‹ãˆã°ã€è©•ä¾¡é¡ãŒ5,000ä¸‡å††ã®è‡ªå®…ã®åœŸåœ°ã«ã“ã®ç‰¹ä¾‹ãŒä½¿ãˆã‚‹ã¨ã€ç¨é‡‘è¨ˆç®—ä¸Šã®è©•ä¾¡é¡ã¯ <b>5,000ä¸‡å†† Ã— 20% = 1,000ä¸‡å††</b> ã«ã¾ã§ä¸‹ãŒã‚Šã¾ã™ã€‚ã“ã®å·®é¡4,000ä¸‡å††åˆ†ãŒã¾ã‚‹ã”ã¨èª²ç¨å¯¾è±¡ã‹ã‚‰å¤–ã‚Œã‚‹ãŸã‚ã€ç¯€ç¨åŠ¹æœã¯çµ¶å¤§ã§ã™ã€‚<br>ãŸã ã—ã€èª°ãŒç›¸ç¶šã™ã‚‹ã‹ã€ç›¸ç¶šå¾Œã‚‚ä½ã¿ç¶šã‘ã‚‹ã‹ãªã©ã€é©ç”¨è¦ä»¶ãŒéå¸¸ã«è¤‡é›‘ãªãŸã‚ã€<b>å¿…ãšå°‚é–€å®¶ã¸ã®ç›¸è«‡ãŒå¿…è¦</b>ã§ã™ã€‚</p>
                        </div>
                    </div>
                    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                        <h3 class="font-bold text-lg text-indigo-700">â‘¢ ç”Ÿå‰è´ˆä¸ã‚’è¨ˆç”»çš„ã«è¡Œã†</h3>
                        <p class="text-gray-700 mt-1">å…ƒæ°—ãªã†ã¡ã«è²¡ç”£ã‚’è´ˆä¸ã—ã€å°†æ¥ã®ç›¸ç¶šè²¡ç”£ã‚’æ¸›ã‚‰ã™æœ€ã‚‚åŸºæœ¬çš„ãªå¯¾ç­–ã§ã™ã€‚<br>ãƒ»<b>æš¦å¹´è´ˆä¸ï¼š</b>å¹´é–“110ä¸‡å††ã¾ã§éèª²ç¨ã§è´ˆä¸ã§ãã¾ã™ã€‚<br>ãƒ»<b>ç›¸ç¶šæ™‚ç²¾ç®—èª²ç¨ï¼š</b>2500ä¸‡å††ã¾ã§éèª²ç¨ã§è´ˆä¸ã§ãã¾ã™ãŒã€ç›¸ç¶šæ™‚ã«æŒã¡æˆ»ã—ã¦è¨ˆç®—ã—ã¾ã™ã€‚<br><b>ãƒã‚¤ãƒ³ãƒˆï¼š</b>æ—©ã‚ã«è¨ˆç”»çš„ã«å§‹ã‚ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚</p>
                    </div>
                    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                        <h3 class="font-bold text-lg text-indigo-700">â‘£ é…å¶è€…ã®ç¨é¡è»½æ¸›ã‚’ç†è§£ã™ã‚‹</h3>
                        <p class="text-gray-700 mt-1">é…å¶è€…ãŒç›¸ç¶šã™ã‚‹è²¡ç”£ã¯ã€æœ€ä½ã§ã‚‚1å„„6000ä¸‡å††ã¾ã§ã¯ç›¸ç¶šç¨ãŒã‹ã‹ã‚Šã¾ã›ã‚“ã€‚ã“ã®ãŸã‚ã€é…å¶è€…ãŒã„ã‚‹å ´åˆã¯ç´ç¨é¡ãŒ0å††ã«ãªã‚‹ã“ã¨ã‚‚å¤šã„ã§ã™ã€‚<br><b>ãƒã‚¤ãƒ³ãƒˆï¼š</b>äºŒæ¬¡ç›¸ç¶šï¼ˆé…å¶è€…ãŒäº¡ããªã£ãŸæ™‚ã®ç›¸ç¶šï¼‰ã¾ã§è€ƒãˆã¦ã€è²¡ç”£ã®åˆ†ã‘æ–¹ã‚’æ±ºã‚ã‚‹ã“ã¨ãŒè³¢æ˜ã§ã™ã€‚</p>
                    </div>
                </div>
            </div>

             <div class="section-box">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path><path d="M7 15h.01M10 15h.01M13 15h.01"></path></svg>
                    6. ã„ã¤ã¾ã§ã«ä½•ã‚’ã™ã‚Œã°ã„ã„ï¼Ÿç”³å‘Šã¨ç´ç¨
                </h2>
                <p>ç›¸ç¶šç¨ã®ç”³å‘Šã¨ç´ç¨ã«ã¯æœŸé™ãŒã‚ã‚Šã¾ã™ã€‚</p>
                <div class="mt-4 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700">
                    <p class="font-bold">ç”³å‘Šã¨ç´ç¨ã®æœŸé™</p>
                    <p>äº¡ããªã£ãŸã“ã¨ã‚’çŸ¥ã£ãŸæ—¥ã®ç¿Œæ—¥ã‹ã‚‰<span class="text-xl font-bold">10ãƒ¶æœˆä»¥å†…</span>ã«ã€äº¡ããªã£ãŸæ–¹ã®ä½æ‰€åœ°ã‚’ç®¡è½„ã™ã‚‹ç¨å‹™ç½²ã«è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
                </div>
                <p class="mt-4">æœŸé™å†…ã«ç”³å‘Šã—ãªã„ã¨ã€ãƒšãƒŠãƒ«ãƒ†ã‚£ã¨ã—ã¦ä½™åˆ†ãªç¨é‡‘ãŒã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚è²¡ç”£ãŒå¤šã„å ´åˆã‚„åˆ†ã‘æ–¹ãŒè¤‡é›‘ãªå ´åˆã¯ã€æ—©ã‚ã«ç¨ç†å£«ã«ç›¸è«‡ã—ã¾ã—ã‚‡ã†ã€‚</p>
            </div>

        </section>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- DOMè¦ç´ ã®å–å¾— ---
            const heirPatternSelect = document.getElementById('heirPattern');
            const heirCountContainer = document.getElementById('heirCountContainer');
            const heirCountLabel = document.getElementById('heirCountLabel');
            const numHeirsInput = document.getElementById('numHeirs');
            const calculateBtn = document.getElementById('calculateBtn');
            const resultsSection = document.getElementById('resultsSection');

            // --- ç¨ç‡è¡¨ (å¹³æˆ27å¹´1æœˆ1æ—¥ä»¥é™) ---
            const taxRates = [
                { limit: 10000000, rate: 0.10, deduction: 0 },
                { limit: 30000000, rate: 0.15, deduction: 500000 },
                { limit: 50000000, rate: 0.20, deduction: 2000000 },
                { limit: 100000000, rate: 0.30, deduction: 7000000 },
                { limit: 200000000, rate: 0.40, deduction: 17000000 },
                { limit: 300000000, rate: 0.45, deduction: 27000000 },
                { limit: 600000000, rate: 0.50, deduction: 42000000 },
                { limit: Infinity, rate: 0.55, deduction: 72000000 }
            ];

            // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ ---
            heirPatternSelect.addEventListener('change', updateHeirCountUI);
            calculateBtn.addEventListener('click', executeCalculation);

            // --- åˆæœŸåŒ– ---
            updateHeirCountUI();

            // --- é–¢æ•°å®šç¾© ---

            function updateHeirCountUI() {
                const pattern = heirPatternSelect.value;
                const labels = {
                    spouseAndChildren: 'å­ã®äººæ•°',
                    childrenOnly: 'å­ã®äººæ•°',
                    spouseAndParents: 'è¦ªã®äººæ•°',
                    parentsOnly: 'è¦ªã®äººæ•°',
                    spouseAndSiblings: 'å…„å¼Ÿå§‰å¦¹ã®äººæ•°',
                    siblingsOnly: 'å…„å¼Ÿå§‰å¦¹ã®äººæ•°',
                };

                if (labels[pattern]) {
                    heirCountLabel.textContent = labels[pattern];
                    numHeirsInput.value = (pattern.includes('Children')) ? 2 : 1;
                    heirCountContainer.style.display = 'block';
                } else {
                    heirCountContainer.style.display = 'none';
                }
            }

            function formatCurrency(amount) {
                if (typeof amount !== 'number' || isNaN(amount)) return '0 å††';
                return Math.round(amount).toLocaleString('ja-JP') + ' å††';
            }

            function getTaxBracket(amount) {
                if (amount <= 0) return null;
                for (const rate of taxRates) {
                    if (amount <= rate.limit) {
                        return rate;
                    }
                }
                return null;
            }

            function calculateSingleTax(amount) {
                const bracket = getTaxBracket(amount);
                if (!bracket) return 0;
                return (amount * bracket.rate) - bracket.deduction;
            }

            function executeCalculation() {
                const inputs = {
                    pattern: heirPatternSelect.value,
                    heirs_count: parseInt(numHeirsInput.value) || 1,
                    assetCash: (parseFloat(document.getElementById('assetCash').value) || 0) * 10000,
                    assetSecurities: (parseFloat(document.getElementById('assetSecurities').value) || 0) * 10000,
                    assetRealEstate: (parseFloat(document.getElementById('assetRealEstate').value) || 0) * 10000,
                    smallScaleLand: document.getElementById('smallScaleLand').checked,
                    assetLifeInsurance: (parseFloat(document.getElementById('assetLifeInsurance').value) || 0) * 10000,
                    assetOther: (parseFloat(document.getElementById('assetOther').value) || 0) * 10000,
                    liabilityDebt: (parseFloat(document.getElementById('liabilityDebt').value) || 0) * 10000,
                    liabilityFuneral: (parseFloat(document.getElementById('liabilityFuneral').value) || 0) * 10000,
                };

                let hasSpouse = false;
                let numChildren = 0, numParents = 0, numSiblings = 0;
                let statutoryShares = {};
                let shareTexts = {};

                switch (inputs.pattern) {
                    case 'spouseAndChildren':
                        hasSpouse = true; numChildren = inputs.heirs_count;
                        statutoryShares = { spouse: 0.5, children: 0.5 };
                        shareTexts = { spouse: '1/2', children: `1/2ã‚’${numChildren}äººã§åˆ†å‰²` };
                        break;
                    case 'spouseAndParents':
                        hasSpouse = true; numParents = inputs.heirs_count;
                        statutoryShares = { spouse: 2/3, parents: 1/3 };
                        shareTexts = { spouse: '2/3', parents: `1/3ã‚’${numParents}äººã§åˆ†å‰²` };
                        break;
                    case 'spouseAndSiblings':
                        hasSpouse = true; numSiblings = inputs.heirs_count;
                        statutoryShares = { spouse: 3/4, siblings: 1/4 };
                        shareTexts = { spouse: '3/4', siblings: `1/4ã‚’${numSiblings}äººã§åˆ†å‰²` };
                        break;
                    case 'childrenOnly':
                        numChildren = inputs.heirs_count;
                        statutoryShares = { children: 1 };
                        shareTexts = { children: `å…¨ä½“ã‚’${numChildren}äººã§åˆ†å‰²` };
                        break;
                    case 'parentsOnly':
                        numParents = inputs.heirs_count;
                        statutoryShares = { parents: 1 };
                        shareTexts = { parents: `å…¨ä½“ã‚’${numParents}äººã§åˆ†å‰²` };
                        break;
                    case 'siblingsOnly':
                        numSiblings = inputs.heirs_count;
                        statutoryShares = { siblings: 1 };
                        shareTexts = { siblings: `å…¨ä½“ã‚’${numSiblings}äººã§åˆ†å‰²` };
                        break;
                    case 'spouseOnly':
                        hasSpouse = true;
                        statutoryShares = { spouse: 1 };
                        shareTexts = { spouse: 'ã™ã¹ã¦' };
                        break;
                }

                const numLegalHeirs = (hasSpouse ? 1 : 0) + numChildren + numParents + numSiblings;
                if (numLegalHeirs === 0) { alert("ç›¸ç¶šäººãŒã„ã¾ã›ã‚“ã€‚è¨ˆç®—ã§ãã¾ã›ã‚“ã€‚"); return; }

                const process = {};

                process.originalRealEstate = inputs.assetRealEstate;
                process.realEstateValue = inputs.smallScaleLand ? inputs.assetRealEstate * 0.2 : inputs.assetRealEstate;
                process.realEstateReduction = process.originalRealEstate - process.realEstateValue;

                const nonTaxableLimit = 5000000 * numLegalHeirs;
                process.taxableLifeInsurance = Math.max(0, inputs.assetLifeInsurance - nonTaxableLimit);
                process.lifeInsuranceReduction = inputs.assetLifeInsurance - process.taxableLifeInsurance;

                process.totalPositiveAssets = inputs.assetCash + inputs.assetSecurities + inputs.assetRealEstate + inputs.assetLifeInsurance + inputs.assetOther;
                process.totalLiabilities = inputs.liabilityDebt + inputs.liabilityFuneral;

                const netAssetsForTax = inputs.assetCash + inputs.assetSecurities + process.realEstateValue + process.taxableLifeInsurance + inputs.assetOther;
                process.netAssets = netAssetsForTax - process.totalLiabilities;

                process.numLegalHeirs = numLegalHeirs;
                process.basicDeduction = 30000000 + (6000000 * numLegalHeirs);
                process.taxableEstate = Math.max(0, process.netAssets - process.basicDeduction);

                let totalTax = 0;
                let heirStatutoryTaxes = [];

                if (process.taxableEstate > 0) {
                    const addStatutoryTax = (isHeir, num, type, totalShare, shareText) => {
                        if (!isHeir) return;
                        const sharePerHeir = num > 0 ? totalShare / num : totalShare;
                        const loopCount = num > 0 ? num : 1;
                        for(let i=0; i < loopCount; i++) {
                            const statutoryAmount = process.taxableEstate * sharePerHeir;
                            const taxBracket = getTaxBracket(statutoryAmount);
                            const tax = calculateSingleTax(statutoryAmount);
                            heirStatutoryTaxes.push({
                                name: num > 0 ? `${type} ${i+1}` : type,
                                shareText: shareText,
                                statutoryAmount: statutoryAmount,
                                tax: tax,
                                taxBracket: taxBracket
                            });
                            totalTax += tax;
                        }
                    };
                    addStatutoryTax(hasSpouse, 0, 'é…å¶è€…', statutoryShares.spouse, shareTexts.spouse);
                    addStatutoryTax(numChildren > 0, numChildren, 'å­', statutoryShares.children, shareTexts.children);
                    addStatutoryTax(numParents > 0, numParents, 'è¦ª', statutoryShares.parents, shareTexts.parents);
                    addStatutoryTax(numSiblings > 0, numSiblings, 'å…„å¼Ÿå§‰å¦¹', statutoryShares.siblings, shareTexts.siblings);
                }
                process.totalTax = totalTax;
                process.heirStatutoryTaxes = heirStatutoryTaxes;

                let finalHeirTaxes = [];
                const netAssetsForDistribution = process.netAssets + process.realEstateReduction + process.lifeInsuranceReduction;
                if (process.totalTax > 0) {
                     if (hasSpouse) {
                         const actualShareRatio = statutoryShares.spouse;
                         const actualShareValue = netAssetsForDistribution * actualShareRatio;
                         let heirTax = process.totalTax * actualShareRatio;
                         const spouseTaxReductionLimit = Math.max(160000000, netAssetsForDistribution * actualShareRatio);
                         const finalTax = (actualShareValue <= spouseTaxReductionLimit) ? 0 : heirTax;
                         finalHeirTaxes.push({name: 'é…å¶è€…', tax: finalTax, isSpouse: true, originalTax: heirTax});
                     }
                    const addFinalHeirTaxes = (num, type, shareKey, is20pct) => {
                         if (num > 0) {
                             const sharePerHeir = statutoryShares[shareKey] / num;
                             for (let i = 0; i < num; i++) {
                                 let heirTax = process.totalTax * sharePerHeir;
                                 if(is20pct) heirTax *= 1.2;
                                 finalHeirTaxes.push({name: `${type} ${i+1}`, tax: heirTax, isSpouse: false});
                             }
                         }
                     };
                     addFinalHeirTaxes(numChildren, 'å­', 'children', false);
                     addFinalHeirTaxes(numParents, 'è¦ª', 'parents', true);
                     addFinalHeirTaxes(numSiblings, 'å…„å¼Ÿå§‰å¦¹', 'siblings', true);
                }

                displayResults(process, finalHeirTaxes);
                displayCalculationProcess(process, inputs);
                resultsSection.classList.remove('hidden');
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            }

            function displayResults(process, finalHeirTaxes) {
                document.getElementById('resultTotalTax').textContent = formatCurrency(process.totalTax);
                document.getElementById('resultTaxableEstate').textContent = formatCurrency(process.taxableEstate);

                const taxMessage = document.getElementById('taxMessage');
                if (process.totalTax > 0) {
                    taxMessage.textContent = 'ç›¸ç¶šç¨ã®ç·é¡ã§ã™ã€‚';
                    taxMessage.className = 'font-semibold text-indigo-700';
                } else {
                    taxMessage.textContent = 'åŸºç¤æ§é™¤ã®ç¯„å›²å†…ãªã®ã§ç›¸ç¶šç¨ã¯ã‹ã‹ã‚Šã¾ã›ã‚“ï¼';
                    taxMessage.className = 'font-semibold text-green-700';
                }

                const heirResultsContainer = document.getElementById('heirResults');
                heirResultsContainer.innerHTML = '';
                if (finalHeirTaxes.length > 0 && process.totalTax > 0) {
                    finalHeirTaxes.forEach(heir => {
                        const resultDiv = document.createElement('div');
                        resultDiv.className = 'flex justify-between items-center bg-gray-50 p-3 rounded-lg';
                        resultDiv.innerHTML = `
                            <span class="font-medium text-gray-700">${heir.name}</span>
                            <span class="font-bold text-lg text-red-600">${formatCurrency(heir.tax)}</span>
                        `;
                        heirResultsContainer.appendChild(resultDiv);

                        if (heir.isSpouse && heir.originalTax > 0 && heir.tax === 0) {
                            const reductionDiv = document.createElement('div');
                            reductionDiv.className = 'text-sm text-blue-600 pl-4 -mt-2 mb-2';
                            reductionDiv.innerHTML = `(é…å¶è€…ã®ç¨é¡è»½æ¸›é©ç”¨ã«ã‚ˆã‚Š <span class="font-bold">${formatCurrency(heir.originalTax)}</span> â†’ 0å††)`;
                            heirResultsContainer.appendChild(reductionDiv);
                        }
                    });
                } else {
                     heirResultsContainer.innerHTML = '<p class="text-center text-gray-500">ç´ç¨é¡ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                }
            }

            function displayCalculationProcess(process, inputs) {
                const container = document.getElementById('calculationProcess');

                let step3Html = '';
                if (process.heirStatutoryTaxes.length > 0) {
                    process.heirStatutoryTaxes.forEach(heir => {
                        const bracket = heir.taxBracket;
                        const calcFormula = bracket ? `(${formatCurrency(heir.statutoryAmount)} Ã— ${bracket.rate * 100}%) - ${formatCurrency(bracket.deduction)}` : '0å††';
                        step3Html += `
                            <li class="p-2 border-t">
                                <p><b>${heir.name}</b> (æ³•å®šç›¸ç¶šåˆ†: ${heir.shareText}):</p>
                                <p class="text-xs pl-2">${formatCurrency(process.taxableEstate)} Ã— (æ³•å®šç›¸ç¶šåˆ†) = ${formatCurrency(heir.statutoryAmount)}</p>
                                <p class="text-xs pl-2">${calcFormula}</p>
                                <p class="font-semibold pl-2">â†’ ç¨é¡: ${formatCurrency(heir.tax)}</p>
                            </li>
                        `;
                    });
                } else {
                    step3Html = '<li>èª²ç¨éºç”£ç·é¡ãŒ0å††ã®ãŸã‚ã€ç¨é¡ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚</li>';
                }

                container.innerHTML = `
                    <div class="calc-step">
                        <h4 class="font-bold mb-2">ã‚¹ãƒ†ãƒƒãƒ—1ï¼šè²¡ç”£ã®è©•ä¾¡é¡ã‚’è¨ˆç®—</h4>
                        <p>ã¾ãšã€ãƒ—ãƒ©ã‚¹ã®è²¡ç”£ã‹ã‚‰ãƒã‚¤ãƒŠã‚¹ã®è²¡ç”£ã‚’å¼•ã„ã¦ã€ãŠãŠã‚‚ã¨ã®è²¡ç”£é¡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚</p>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-sm bg-white p-3 rounded">
                            <li>é è²¯é‡‘ãƒ»æœ‰ä¾¡è¨¼åˆ¸ãªã©ï¼š ${formatCurrency(inputs.assetCash + inputs.assetSecurities + inputs.assetOther)}</li>
                            ${inputs.smallScaleLand ? `<li>ä¸å‹•ç”£ï¼š <span class="line-through">${formatCurrency(process.originalRealEstate)}</span> â†’ ${formatCurrency(process.realEstateValue)} <span class="text-blue-600 text-xs">(ç‰¹ä¾‹é©ç”¨ã§ ${formatCurrency(process.realEstateReduction)} æ¸›é¡)</span></li>` : `<li>ä¸å‹•ç”£ï¼š ${formatCurrency(process.realEstateValue)}</li>`}
                            <li>ç”Ÿå‘½ä¿é™ºé‡‘ï¼š ${formatCurrency(process.taxableLifeInsurance)} <span class="text-blue-600 text-xs">(éèª²ç¨æ  ${formatCurrency(process.lifeInsuranceReduction)} é©ç”¨å¾Œ)</span></li>
                            <li class="border-t pt-1 mt-1">ãƒ—ãƒ©ã‚¹ã®è²¡ç”£ åˆè¨ˆï¼š ${formatCurrency(process.netAssets + process.totalLiabilities)}</li>
                            <li>å€Ÿå…¥é‡‘ãƒ»è‘¬å¼è²»ç”¨ï¼š â–² ${formatCurrency(process.totalLiabilities)}</li>
                            <li class="font-bold text-base bg-gray-200 p-2 rounded">æ­£å‘³ã®è²¡ç”£é¡ï¼š ${formatCurrency(process.netAssets)}</li>
                        </ul>
                    </div>
                    <div class="calc-step">
                        <h4 class="font-bold mb-2">ã‚¹ãƒ†ãƒƒãƒ—2ï¼šç¨é‡‘ã®ã‹ã‹ã‚‹è²¡ç”£é¡ã‚’è¨ˆç®—</h4>
                        <p>æ¬¡ã«ã€æ­£å‘³ã®è²¡ç”£é¡ã‹ã‚‰ã€ŒåŸºç¤æ§é™¤ã€ã‚’å¼•ã„ã¦ã€ç¨é‡‘ãŒã‹ã‹ã‚‹å¯¾è±¡é¡ï¼ˆèª²ç¨éºç”£ç·é¡ï¼‰ã‚’æ±‚ã‚ã¾ã™ã€‚</p>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-sm bg-white p-3 rounded">
                            <li>æ³•å®šç›¸ç¶šäººã®æ•°ï¼š ${process.numLegalHeirs}äºº</li>
                            <li>åŸºç¤æ§é™¤é¡ï¼š 3,000ä¸‡å†† + (600ä¸‡å†† Ã— ${process.numLegalHeirs}äºº) = ${formatCurrency(process.basicDeduction)}</li>
                            <li class="border-t pt-1 mt-1">æ­£å‘³ã®è²¡ç”£é¡ï¼š ${formatCurrency(process.netAssets)}</li>
                            <li>åŸºç¤æ§é™¤é¡ï¼š â–² ${formatCurrency(process.basicDeduction)}</li>
                            <li class="font-bold text-base bg-gray-200 p-2 rounded">èª²ç¨éºç”£ç·é¡ï¼š ${formatCurrency(process.taxableEstate)}</li>
                        </ul>
                    </div>
                    <div class="calc-step">
                        <h4 class="font-bold mb-2">ã‚¹ãƒ†ãƒƒãƒ—3ï¼šç›¸ç¶šç¨ã®ç·é¡ã‚’è¨ˆç®—</h4>
                        <p>èª²ç¨éºç”£ç·é¡ã‚’ã€ä¸€åº¦æ³•å¾‹ã§æ±ºã¾ã£ãŸå‰²åˆï¼ˆæ³•å®šç›¸ç¶šåˆ†ï¼‰ã§ä»®ã«åˆ†ã‘ã€ãã‚Œãã‚Œã®ç¨é¡ã‚’è¨ˆç®—ã—ã¦ã‹ã‚‰åˆè¨ˆã—ã¾ã™ã€‚</p>
                        <div class="mt-2 text-sm bg-white p-3 rounded">
                            <ul class="space-y-2">${step3Html}</ul>
                            <p class="border-t pt-2 mt-2 font-bold text-base bg-gray-200 p-2 rounded">ç›¸ç¶šç¨ã®ç·é¡ (ä¸Šè¨˜ã‚’åˆè¨ˆ)ï¼š ${formatCurrency(process.totalTax)}</p>
                        </div>
                    </div>
                     <div class="calc-step">
                        <h4 class="font-bold mb-2">ã‚¹ãƒ†ãƒƒãƒ—4ï¼šå„äººãŒå®Ÿéš›ã«ç´ã‚ã‚‹ç¨é¡ã‚’è¨ˆç®—</h4>
                        <p>ç›¸ç¶šç¨ã®ç·é¡ã‚’ã€å®Ÿéš›ã«è²¡ç”£ã‚’ã‚‚ã‚‰ã†å‰²åˆã«å¿œã˜ã¦åˆ†ã‘ã€å„äººã®æœ€çµ‚çš„ãªç´ç¨é¡ãŒæ±ºã¾ã‚Šã¾ã™ã€‚ã“ã®æ®µéšã§ã€Œé…å¶è€…ã®ç¨é¡è»½æ¸›ã€ãªã©ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚</p>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
